(()=>{var u=Object.create,c=Object.defineProperty,h=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,T=Object.getOwnPropertyNames,k=Object.getOwnPropertyDescriptor;var y=e=>c(e,"__esModule",{value:!0});var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of T(t))!f.call(e,a)&&a!=="default"&&c(e,a,{get:()=>t[a],enumerable:!(n=k(t,a))||n.enumerable});return e},I=e=>_(y(c(e!=null?u(h(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var i=S(l=>{l.generateRandomString=()=>{let e=20;for(var t=[],n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._",a=n.length,o=0;o<e;o++)t.push(n.charAt(Math.floor(Math.random()*a)));return t.join("")}});var g=I(i());window.onload=()=>{E()};function E(){let e=new URLSearchParams(window.location.hash.slice(1)),t={tokenType:sessionStorage.getItem("d_tokenType"),accessToken:sessionStorage.getItem("d_access_token"),state:sessionStorage.getItem("d_state")};if(t.accessToken!="undefined"&&t.accessToken!=null){console.log("accessToken find");let n=t.state;if(localStorage.getItem("stateParameter")!==n)return console.log("You may have been clickjacked!");let o=t.accessToken,s=t.tokenType;$(s,o)}else{let n=e.get("state");n==null&&(n=(0,g.generateRandomString)()),localStorage.setItem("stateParameter",n),document.getElementById("login").href+=`&state=${n}`,document.getElementById("login").style.display="block"}}function $(e,t){d("users/@me",e,t).then(n=>{let{username:a,discriminator:o,avatar:s,id:m}=n,r=document.getElementById("info");r.innerHTML=" ",r.innerHTML=`<img src="https://cdn.discordapp.com/avatars/${m}/${s}.png"/>`,r.innerHTML+=`\u3053\u3093\u306B\u3061\u306F\uFF01 ${a}#${o}\u3055\u3093\u3002\u4ECA\u65E5\u306F\u306A\u306B\u3092\u3057\u307E\u3057\u3087\u3046\uFF1F`}).catch(n=>{console.log(n)}),d("users/@me/guilds",e,t).then(n=>{document.getElementById("guilds_count").innerHTML=`\u3042\u306A\u305F\u306F\u4ECA\u3001${n.length}\u500B\u306E\u30B5\u30FC\u30D0\u30FC\u306B\u53C2\u52A0\u3057\u3066\u3044\u307E\u3059\u3002`;let a=document.getElementById("guilds_list");n.forEach(o=>{a.innerHTML+=o.name+"<br />"})}).catch(n=>{console.log(n)})}async function d(e,t,n){return await(await fetch(`https://discord.com/api/${e}`,{headers:{authorization:`${t} ${n}`}})).json()}})();
